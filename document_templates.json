{
  "version": "1.0",
  "description": "Document extraction templates for OCR processing",
  "templates": {
    "billing_note": {
      "name": "ใบวางบิล/Billing Note",
      "name_en": "Billing Note",
      "detect_keywords": [
        "ใบวางบิล",
        "BILLING NOTE",
        "Billing Note"
      ],
      "fields": {
        "document_no": {
          "label": "Billing No",
          "patterns": [
            "เลขที่\\s*[:\\.]?\\s*([A-Za-z0-9\\-\\/]+)",
            "No\\.?\\s*[:\\.]?\\s*([A-Za-z0-9\\-\\/]+)"
          ],
          "required": true,
          "skip_lines": 3
        },
        "date": {
          "label": "Date",
          "patterns": [
            "วันที่\\s*[:\\.]?\\s*(\\d{1,2}[\\.\\/\\-]\\d{1,2}[\\.\\/\\-]\\d{2,4})",
            "Date\\s*[:\\.]?\\s*(\\d{1,2}[\\.\\/\\-]\\d{1,2}[\\.\\/\\-]\\d{2,4})"
          ],
          "required": true
        },
        "amount": {
          "label": "Amount",
          "patterns": [
            "รวมเงิน\\s*[:\\.]?\\s*([\\d,]+\\.\\d{2})",
            "Total\\s*[:\\.]?\\s*([\\d,]+\\.\\d{2})"
          ],
          "required": false,
          "fallback": "last_amount"
        }
      }
    },
    "invoice": {
      "name": "ใบกำกับภาษี/Invoice",
      "name_en": "Tax Invoice",
      "detect_keywords": [
        "ใบเสร็จรับเงิน / ใบกำกับภาษี",
        "ใบเสร็จรับเงิน/ใบกำกับภาษี",
        "ใบกำกับภาษี",
        "TAX INVOICE",
        "ใบแจ้งหนี้",
        "INVOICE"
      ],
      "fields": {
        "document_no": {
          "label": "Invoice No",
          "patterns": [
            "(BK\\d+-OUT\\s*\\d{5,6})",
            "No\\.?\\s*[:\\.]?\\s*(LF-\\d+)",
            "เลขที่\\s*/\\s*NO\\.?\\s*([A-Za-z]\\d{5,})",
            "เลขที่\\s+([A-Za-z]\\d{6,})",
            "เลขที่\\s*NO\\.?\\s*[/\\s]*(_?[A-Za-z]\\d{5,})",
            "Tax\\s*Invoice\\s*No[\\s\\.:]*([A-Za-z0-9\\-\\/]*\\d+[A-Za-z0-9\\-\\/]*)",
            "Tax\\s*Invoice\\s*No\\.?\\s*[:\\.]?\\s*([A-Za-z0-9\\-\\/]*\\d+[A-Za-z0-9\\-\\/]*)",
            "RECEIPT\\s*No\\.?\\s*[:\\.]?\\s*([A-Za-z0-9\\-\\/]*\\d+[A-Za-z0-9\\-\\/]*)",
            "เลขที่/NO\\.?\\s*[:\\.]?\\s*([A-Za-z0-9\\-\\/]*\\d+[A-Za-z0-9\\-\\/]*)",
            "เลขที่\\s*[:\\.]?\\s*(\\d{2}\\s*-\\s*\\d{6}\\s*-\\s*\\d{4})",
            "No\\.?\\s*[:\\.]?\\s*([A-Z]+-[\\d]+)",
            "Invoice\\s*No\\.?\\s*[:\\.]?\\s*([A-Za-z0-9\\-\\/]*\\d+[A-Za-z0-9\\-\\/]*)",
            "เลขที่\\s*[:\\.]?\\s*([A-Za-z0-9\\-\\/]*\\d+[A-Za-z0-9\\-\\/]*)",
            "No\\.?\\s*[:\\.]?\\s*([A-Za-z0-9\\-\\/]*\\d[A-Za-z0-9\\-\\/]*)"
          ],
          "required": true,
          "min_digits": 4,
          "skip_lines": 3
        },
        "date": {
          "label": "Date",
          "patterns": [
            "วันที่\\s*[:\\.]?\\s*(\\d{1,2}[\\.\\/\\-]\\d{1,2}[\\.\\/\\-]\\d{2,4})",
            "วันที่\\s*[:\\.]?\\s*(\\d{1,2}\\s+[ก-๙]+\\s+\\d{4})",
            "Date\\s*[:\\.]?\\s*(\\d{1,2}[\\.\\/\\-]\\d{1,2}[\\.\\/\\-]\\d{2,4})"
          ],
          "required": true
        },
        "amount": {
          "label": "Amount",
          "patterns": [
            "จำนวนเงินรวมทั้งสิ้น\\s*[:\\.]?\\s*([\\d,]+\\.\\d{2})",
            "รวมเงินทั้งสิ้น\\s*[:\\.]?\\s*([\\d,]+\\.\\d{2})",
            "GRAND\\s*TOTAL\\s*[:\\.]?\\s*([\\d,]+\\.\\d{2})"
          ],
          "required": false,
          "fallback": "last_amount"
        },
        "total_amount": {
          "label": "Total Amount",
          "patterns": [
            "รวมภาษีมูลค่าเพิ่ม\\s*[:\\.]?\\s*([\\d,]+\\.\\d{2})",
            "รวม\\s*ภาษีมูลค่าเพิ่ม[^\\d]*([\\d,]+\\.\\d{2})"
          ],
          "required": false
        },
        "withholding_tax": {
          "label": "Withholding Tax",
          "patterns": [
            "หัก\\s*ณ\\s*ที่จ่าย\\s*[:\\.]?\\s*([\\d,]+\\.\\d{2})",
            "หัก\\s+ณ\\s+ที่จ่าย[^\\d]*([\\d,]+\\.\\d{2})"
          ],
          "required": false
        },
        "description": {
          "label": "Description",
          "patterns": [
            "<td>1</td><td>(.+?)</td>",
            "จำนวนเงิน\\s+1\\s+(.+?)(?=\\s+[\\d,]+\\.\\d{2})"
          ],
          "required": false,
          "clean_html": true
        },
        "sales_promotion": {
          "label": "Sales Promotion",
          "patterns": [
            "ค่าส่งเสริมการขาย[^\\n]+",
            "หมายเหตุ[^\\n]*(?:\\n|\\r\\n|\\r)\\s*(ค่าส่งเสริมการขาย[^\\n]*)"
          ],
          "required": false
        }
      }
    },
    "cy_instruction": {
      "name": "CY INSTRUCTION",
      "name_en": "CY Instruction",
      "detect_keywords": [
        "CY INSTRUCTION",
        "CONTAINER YARD INSTRUCTION",
        "PLEASE ARRANGE TRANSPORTATION OF CONTAINER"
      ],
      "fields": {
        "cy_org": {
          "label": "CyOrg",
          "patterns": [
            "ORG\\s*[:\\.]?\\s*(\\d+)"
          ],
          "required": false
        },
        "cy_exporter": {
          "label": "CyExporter",
          "patterns": [
            "<td>EXPORTER</td><td>([^<]+)</td>",
            "EXPORTER\\s*</td><td>([^<]+)</td>",
            "EXPORTER\\s+([A-Za-z0-9\\.\\,\\s]+(?:CO\\.?,?\\s*LTD\\.?|COMPANY|CORPORATION|INC\\.?))"
          ],
          "required": false,
          "clean_html": true
        },
        "cy_invoice_no": {
          "label": "CyInvoiceNo",
          "patterns": [
            "<td>INVOICE\\s*NO\\.?</td><td>([^<]+)</td>",
            "INVOICE\\s*NO\\.?\\s*</td><td>([^<]+)</td>",
            "INVOICE\\s*NO\\.?\\s*[:\\.]?\\s*([A-Za-z0-9\\-\\/]+)"
          ],
          "required": false
        },
        "cy_booking": {
          "label": "CyBooking",
          "patterns": [
            "BOOKING\\s*NO\\.?\\s*[:\\.]?\\s*([A-Za-z0-9\\s]+)"
          ],
          "required": false,
          "extract_booking_pattern": true,
          "remove_spaces": true
        },
        "cy_qty": {
          "label": "CyQty",
          "patterns": [
            "QUANTITY\\s*[:\\.]?\\s*([\\d\\.]+\\s*x\\s*DRY\\s*\\d+['\"]?\\s*\\([^\\)]+\\))",
            "QUANTITY\\s*[:\\.]?\\s*([\\d.x\\s\\('\"A-Z)]+?)(?=\\s+CONTAINER|\\s*[A-Z]{3,}|$)",
            "QUANTITY\\s*[:\\.]?\\s*([\\d\\.]+\\s*x\\s*[A-Za-z0-9\\s'\\(\\)]+)"
          ],
          "required": false
        },
        "cy_ship_agent": {
          "label": "CyShipAgent",
          "patterns": [
            "<td>SHIP\\s*AGENT</td><td>([^<]+)</td>",
            "SHIP\\s*AGENT\\s*</td><td>([^<]+)</td>"
          ],
          "required": false
        },
        "cy_mixed_load": {
          "label": "CyMixedLoad",
          "patterns": [
            "(MIXED\\s*LOAD)"
          ],
          "required": false
        }
      }
    },
    "custom": {
      "name": "อื่นๆ",
      "name_en": "Other/Custom",
      "detect_keywords": [],
      "fields": {
        "document_no": {
          "label": "Document No",
          "patterns": [
            "เลขที่\\s*[:\\.]?\\s*([A-Za-z0-9\\-\\/]{3,})",
            "No\\.?\\s*[:\\.]?\\s*([A-Za-z0-9\\-\\/]{4,})"
          ],
          "required": false
        },
        "date": {
          "label": "Date",
          "patterns": [
            "วันที่\\s*[:\\.]?\\s*(\\d{1,2}[\\.\\/\\-]\\d{1,2}[\\.\\/\\-]\\d{2,4})",
            "Date\\s*[:\\.]?\\s*(\\d{1,2}[\\.\\/\\-]\\d{1,2}[\\.\\/\\-]\\d{2,4})"
          ],
          "required": false
        },
        "amount": {
          "label": "Amount",
          "patterns": [],
          "required": false,
          "fallback": "last_amount"
        }
      }
    },
    "sahatthai_invoice": {
      "name": "Sahatthai Invoice",
      "name_en": "Sahatthai Invoice",
      "detect_keywords": [
        "SAHATTHAI TERMINAL",
        "สหไทย เทอร์มินอล"
      ],
      "fields": {
        "document_no": {
          "label": "Invoice No",
          "patterns": [
            "(BK\\d+-OUT\\s*\\d{5,6})",
            "No\\.?\\s*[:\\.]?\\s*(LF-\\d+)",
            "เลขที่\\s*/\\s*NO\\.?\\s*([A-Za-z]\\d{5,})",
            "เลขที่\\s+([A-Za-z]\\d{6,})",
            "เลขที่\\s*NO\\.?\\s*[/\\s]*(_?[A-Za-z]\\d{5,})",
            "Tax\\s*Invoice\\s*No[\\s\\.:]*([A-Za-z0-9\\-\\/]*\\d+[A-Za-z0-9\\-\\/]*)",
            "Tax\\s*Invoice\\s*No\\.?\\s*[:\\.]?\\s*([A-Za-z0-9\\-\\/]*\\d+[A-Za-z0-9\\-\\/]*)",
            "RECEIPT\\s*No\\.?\\s*[:\\.]?\\s*([A-Za-z0-9\\-\\/]*\\d+[A-Za-z0-9\\-\\/]*)",
            "เลขที่/NO\\.?\\s*[:\\.]?\\s*([A-Za-z0-9\\-\\/]*\\d+[A-Za-z0-9\\-\\/]*)",
            "เลขที่\\s*[:\\.]?\\s*(\\d{2}\\s*-\\s*\\d{6}\\s*-\\s*\\d{4})",
            "No\\.?\\s*[:\\.]?\\s*([A-Z]+-[\\d]+)",
            "Invoice\\s*No\\.?\\s*[:\\.]?\\s*([A-Za-z0-9\\-\\/]*\\d+[A-Za-z0-9\\-\\/]*)",
            "เลขที่\\s*[:\\.]?\\s*([A-Za-z0-9\\-\\/]*\\d+[A-Za-z0-9\\-\\/]*)",
            "No\\.?\\s*[:\\.]?\\s*([A-Za-z0-9\\-\\/]*\\d[A-Za-z0-9\\-\\/]*)"
          ],
          "required": true,
          "min_digits": 4,
          "skip_lines": 12
        },
        "date": {
          "label": "Date",
          "patterns": [
            "วันที่\\s*[:\\.]?\\s*(\\d{1,2}[\\.\\/\\-]\\d{1,2}[\\.\\/\\-]\\d{2,4})",
            "วันที่\\s*[:\\.]?\\s*(\\d{1,2}\\s+[ก-๙]+\\s+\\d{4})",
            "Date\\s*[:\\.]?\\s*(\\d{1,2}[\\.\\/\\-]\\d{1,2}[\\.\\/\\-]\\d{2,4})"
          ],
          "required": true
        },
        "amount": {
          "label": "Amount",
          "patterns": [
            "จำนวนเงินรวมทั้งสิ้น\\s*[:\\.]?\\s*([\\d,]+\\.\\d{2})",
            "รวมเงินทั้งสิ้น\\s*[:\\.]?\\s*([\\d,]+\\.\\d{2})",
            "GRAND\\s*TOTAL\\s*[:\\.]?\\s*([\\d,]+\\.\\d{2})"
          ],
          "required": false,
          "fallback": "last_amount"
        }
      }
    }
  },
  "common_fields": {
    "tax_id": {
      "label": "Tax ID",
      "label_th": "เลขประจำตัวผู้เสียภาษี",
      "patterns": [
        "(\\d\\s+\\d\\s+\\d\\s+\\d\\s+\\d\\s+\\d\\s+\\d\\s+\\d\\s+\\d\\s+\\d\\s+\\d\\s+\\d\\s+\\d)",
        "\\b(\\d{1}\\s+\\d{12})\\b",
        "\\b(\\d{13})\\b",
        "\\b\\d{1}-\\d{4}-\\d{5}-\\d{2}-\\d{1}\\b",
        "(?:เลข(?:ที่)?(?:ประจำตัว)?ผู้เสียภาษี(?:อากร)?|Tax\\s*ID|Tax\\s*No\\.?)\\s*[:\\.]?\\s*([0-9\\-\\s]{10,25})"
      ],
      "required": true,
      "clean_non_digits": true,
      "length": 13
    },
    "branch": {
      "label": "Branch",
      "label_th": "สาขา",
      "patterns": [
        "(?:สาขา(?:ที่)?(?:ออกใบกำกับภาษี)?|Branch(?:\\s*No\\.?)?)\\s*[:\\.]?\\s*(\\d{1,5})(?!\\d)",
        "(?:สำนักงานใหญ่|สนญ\\.?|Head\\s*Office|H\\.?O\\.?)"
      ],
      "required": false,
      "default_hq": "00000",
      "pad_zeros": 5
    }
  },
  "output_columns": {
    "order": [
      "Link PDF",
      "Page",
      "Document Type",
      "VendorID_OCR",
      "Branch_OCR",
      "Vendor code",
      "ชื่อบริษัท",
      "Document No",
      "Date",
      "Amount",
      "Total Amount",
      "Withholding Tax",
      "Description",
      "Sales Promotion",
      "สาขา",
      "สาขาในใบเสร็จ"
    ]
  }
}